<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title data-pagefind-meta="title[content]" data-pagefind-index="true">
      {{ title | default(site.title) }}
    </title>
    <meta name="title" content="{{ title | default(site.title) }}" data-pagefind-meta="title[content]" data-pagefind-index="true"/>
    <meta name="description" content="{{ description | default(site.description) }}" data-pagefind-meta="description[content]"/>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.css" rel="stylesheet"/>
    <link href="/assets/css/styles.css" rel="stylesheet"/>
    <link rel="icon" href="{{ site.favicon }}" type="image/x-icon"/>

    <script>
      (() => {
        const storedTheme = localStorage.getItem("theme") || "dark";
        document.documentElement.setAttribute("data-bs-theme", storedTheme);
      })();
    </script>
  </head>

  <body class="bg-body">
    <div>
      {% include "partials/navbar.njk" %}

      <div data-pagefind-body>
        <span class="visually-hidden">
          {{ title | default(site.title) }}
          {{ description | default(site.description) }}
        </span>
      </div>

      <main class="py-3 py-md-5">
        <div class="container">
          {{ content | safe }}
        </div>
      </main>
    </div>

    {% include "partials/footer.njk" %}

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/assets/js/search.js" defer></script>

    <script>
      const toggleTheme = () => {
        const html = document.documentElement;
        const current = html.getAttribute("data-bs-theme");
        const next = current === "dark" ? "light" : "dark";
        html.setAttribute("data-bs-theme", next);
        localStorage.setItem("theme", next);
        updateThemeIcon(next);
      };

      const updateThemeIcon = (theme) => {
        const icon = document.getElementById("theme-icon");
        if (!icon) return;
        icon.className = theme === "dark"
          ? "bi bi-moon-fill"
          : "bi bi-sun-fill";
      };

      updateThemeIcon(document.documentElement.getAttribute("data-bs-theme"));
    </script>
  </body>
</html>
