{% if type == "preview" %}
{% if excludeFeatured %}
{% set posts = collections.previewPosts %}
{% else %}
{% set posts = collections.previewPostsAll %}
{% endif %}
{% else %}
{% set posts = collections.posts %}
{% endif %}
{% if posts and posts | length > 0 %}
<div class="row row-gap-4">
{% for post in posts %}
<div class="col-12 col-md-4 pb-3">
<article class="hover-border-primary card bg-body-tertiary rounded-3 shadow-sm border-primary border-opacity-25 h-100 overflow-hidden">
{% if post.data.image %}
<div class="card-img-top overflow-hidden" style="height: 200px;">
<img src="{{ post.data.image }}" class="img-fluid w-100 h-100 object-fit-cover" alt="" style="transition: transform 0.3s ease;">
</div>
{% endif %}
<div class="card-body d-flex flex-column">
<!-- Date Badge -->
<div class="mb-2">
{% if post.data.postDate %}
<span class="badge bg-primary bg-opacity-10 text-primary border border-primary border-opacity-25 rounded-pill px-3 py-2 small">
{{ post.data.postDate | formatDate('MMM Do, YYYY') }}
</span>
{% endif %}
</div>
<!-- Title -->
<h5 class="card-title text-dark mb-3 lh-base">{{ post.data.title }}</h5>
<!-- Description -->
{% if post.data.description %}
<div class="text-muted small mb-3">
{{ post.data.description }}
</div>
{% endif %}
<div class="flex-grow-1"></div>
<!-- Read More Button -->
<div class="mt-3 d-flex flex-column gap-2">
<a class="btn btn-outline-primary btn-sm w-100 stretched-link" href="{{ post.data.permalink or post.url }}">
<i class="bi bi-arrow-right me-2"></i>Read More
</a>
</div>
</div>
</article>
</div>
{% endfor %}
</div>
{% if type == "preview" %}
<div class="text-center mt-4">
<p class="text-muted mb-3">Showing {{ posts | length }} of {{ collections.posts | length }} posts</p>
<a href="/posts/" class="btn btn-outline-primary">
<i class="bi bi-arrow-right me-2"></i>View All Posts
</a>
</div>
{% endif %}
{% else %}
<div class="alert alert-info" role="alert">
<i class="bi bi-info-circle me-2" aria-hidden="true"></i>
No posts at this time. Check back soon!
</div>
{% endif %}